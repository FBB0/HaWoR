{
  "memory_optimization": {
    "enabled": true,
    "optimization_level": "aggressive",
    "target_memory_usage": "6GB",
    "optimizations_enabled": [
      "mixed_precision",
      "gradient_checkpointing",
      "optimized_data_loading",
      "dynamic_batching"
    ]
  },
  "training": {
    "batch_size": 21,
    "gradient_accumulation": 2,
    "mixed_precision": {
      "enabled": true,
      "precision": "fp16",
      "opt_level": "O1"
    },
    "gradient_checkpointing": {
      "enabled": true,
      "strategy": "selective"
    }
  },
  "data_loading": {
    "batch_loading": {
      "prefetch_factor": 2,
      "num_workers": 8,
      "pin_memory": true,
      "persistent_workers": true,
      "memory_per_worker": 0.1,
      "recommendations": [
        "Use 2x prefetch factor for smooth pipeline",
        "Set workers to number of CPU cores",
        "Enable pin_memory for GPU transfer"
      ]
    },
    "data_preprocessing": {
      "on_the_fly_augmentation": true,
      "cache_preprocessed": false,
      "image_compression": {
        "enabled": true,
        "format": "jpeg",
        "quality": 95,
        "memory_savings": 0.3
      },
      "lazy_loading": {
        "enabled": true,
        "load_on_demand": true,
        "memory_footprint": "minimal"
      }
    },
    "memory_mapping": {
      "enabled": true,
      "use_mmap": true,
      "benefits": [
        "Reduced memory footprint",
        "Faster data access",
        "OS-managed caching"
      ]
    },
    "batch_composition": {
      "dynamic_batching": false,
      "sequence_packing": true,
      "memory_per_batch_gb": 0.05,
      "optimization": "memory_over_speed"
    }
  },
  "model": {
    "activation_checkpointing": {
      "backbone_checkpointing": {
        "enabled": true,
        "strategy": "every_n_layers",
        "checkpoint_frequency": 2,
        "memory_savings": 0.4,
        "compute_overhead": 0.3
      },
      "attention_checkpointing": {
        "enabled": true,
        "strategy": "attention_blocks",
        "memory_savings": 0.6,
        "compute_overhead": 0.4
      },
      "motion_module_checkpointing": {
        "enabled": true,
        "strategy": "temporal_blocks",
        "checkpoint_frequency": 1,
        "memory_savings": 0.5,
        "compute_overhead": 0.35
      },
      "full_activation_checkpointing": {
        "enabled": false,
        "strategy": "full_recompute",
        "memory_savings": 0.8,
        "compute_overhead": 1.0
      }
    },
    "memory_efficient_attention": true,
    "use_flash_attention": true
  },
  "hardware": {
    "precision": 16,
    "find_unused_parameters": false,
    "sync_batchnorm": false,
    "compile_model": true
  },
  "memory_monitoring": {
    "enabled": true,
    "log_memory_stats": true,
    "memory_profiling": true,
    "oom_detection": true
  },
  "optimization_summary": {
    "total_memory_savings": "34.4%",
    "savings_breakdown": {
      "mixed_precision": 50.0,
      "gradient_checkpointing": 37.5,
      "data_loading": 30.0,
      "batch_optimization": 20
    },
    "performance_impact": {
      "speed_improvement": "15-25%",
      "compute_overhead": "20-30%",
      "memory_efficiency": "34.4% better"
    },
    "expected_max_batch_size": 30
  }
}